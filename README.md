# ManagementGame (Qt / C++)

TCP пошаговая экономическая игра, реализованная на **C++ с использованием Qt6**.  
Проект строится вокруг **сервер-авторитетной архитектуры**, строгой синхронизации состояния игроков и фаз игры.

---
## Используемые технологии

- C++17
- Qt (Widgets, Network)
- TCP-сокеты
- QJsonDocument

---

### Сборка

## Требования для сборки
 - CMake ≥ 3.20
 - Компилятор с поддержкой C++17
 - Qt 6 (обязательно модули):
   - Qt6::Core
   - Qt6::Widgets
   - Qt6::Gui
   - Qt6::Network
   
## В консоли

 - git clone https://github.com/7malahit7/ManagmentGameQT
 - cd ManagmentGame
 - mkdir build
 - cd build
 - cmake ..
 - cmake --build .
 - ManagmentGame.exe

## P.S.
В репозитории также есть `.zip` с готовым `.exe` и нужными `.dll` под Windows x64  
Qt устанавливать не требуется.

---

## Архитектура

### Основные компоненты

- **GameModel**
  - Хранит состояние игры
  - Управляет фазами, экономикой и игроками
- **MainController**
  - Связывает модель, UI и сеть
  - Реагирует на сигналы модели и сети
- **NetworkController (абстрактный)**
  - Общий интерфейс для сети
  - Используется сервером и клиентом
- **ServerController**
  - TCP-сервер
  - Управляет фазами и состоянием игроков
- **ClientController**
  - TCP-клиент
  - Отправляет действия игрока
  - Получает синхронизированное состояние
- **UI (Qt Widgets)**
  - Главное игровое окно
  - Меню
  
---

## Сетевая модель

### Принципы

- **Сервер — главный**
- Клиенты **никогда не меняют состояние игры напрямую**
- Клиенты отправляют только намерения (READY, ставки, решения)
- Сервер:
  - проверяет
  - обновляет состояние
  - рассылает актуальные данные всем клиентам

---
### Формат сообщений

Обмен данными осуществляется через:
- **TCP**
- **JSON**
- **каждое сообщение заканчивается `\n`**

---

## Игровой процесс

### Фазы игры

Игра проходит по фазам, управляемым сервером:

1. Оплата фиксированных затрат
2. Обновление рынка
3. Торги ЕСМ
4. Производственные решения
5. Торги ЕГП
6. Кредиты и проценты
7. Конец месяца

---

## UI

### Главное окно

Отображает:
- Информацию об игроках
- Текущую фазу
- Чат

---

## Текущее состояние проекта

Проект находится в разработке.  
